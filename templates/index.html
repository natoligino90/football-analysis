<div class="container">
    <h1>⚽ Football Analysis</h1>
    <label for="competition">Campionato (es. SA, PL, BL1, FL1):</label>
    <input id="competition" type="text" value="SA">
    <label for="days">Giorni:</label>
    <input id="days" type="number" value="7">
    <label for="prob">Probabilità minima (%):</label>
    <input id="prob" type="number" value="30">
    <button onclick="cerca()">Cerca</button>
    <hr>
    <table id="result" border="1" style="width:100%">
        <thead>
            <tr>
                <th>Data</th>
                <th>Campionato</th>
                <th>Home</th>
                <th>Away</th>
                <th>Prob. pareggio (%)</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>
<script>
function cerca() {
    let c = document.getElementById('competition').value;
    let d = document.getElementById('days').value;
    let minprob = document.getElementById('prob').value;
    fetch(`/api/probabilita_pareggio?competition=${c}&days=${d}`)
        .then(r => r.json()).then(data => {
            let rows = '';
            if(data.success) {
                data.data.forEach(m => {
                    if(m.draw_probability >= minprob) {
                        rows += `<tr>
                            <td>${m.date.substring(0,10)}</td>
                            <td>${m.competition}</td>
                            <td>${m.home}</td>
                            <td>${m.away}</td>
                            <td>${m.draw_probability}</td>
                        </tr>`;
                    }
                });
            }
            document.querySelector('#result tbody').innerHTML = rows;
        });
}
</script>
